from typing import Protocol
from uuid import UUID

from sqlalchemy.ext.asyncio import AsyncSession

from src.library_catalog.data.models.book import Book


class BookRepositoryProtocol(Protocol):
    """Интерфейс книжного репозитория."""

    session: AsyncSession

    async def create(self, **kwargs) -> Book: ...
    async def get_by_id(self, id: UUID) -> Book | None: ...
    async def update(self, id: UUID, **kwargs) -> Book | None: ...
    async def delete(self, id: UUID) -> bool: ...
    async def find_by_isbn(self, isbn: str) -> Book | None: ...
    async def find_by_filters(self, **kwargs) -> list[Book]: ...
    async def count_by_filters(self, **kwargs) -> int: ...
